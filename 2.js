webpackJsonp([2],{235:function(e,t,i){"use strict";function n(e){i(785)}Object.defineProperty(t,"__esModule",{value:!0});var o=i(373),s=i.n(o);for(var l in o)["default","default"].indexOf(l)<0&&function(e){i.d(t,e,function(){return o[e]})}(l);var r=i(767),a=i(94),c=n,u=a(s.a,r.a,!1,c,null,null);t.default=u.exports},254:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"HelpHint",props:{placement:{default:"top"},content:String},data:function(){return{}}}},257:function(e,t,i){t=e.exports=i(19)(void 0),t.push([e.i,".toolbar{width:100%;padding:8px;background-color:#fff;overflow:hidden;line-height:32px;border:1px solid #e6ebf5}",""])},260:function(e,t,i){"use strict";function n(e){i(262)}Object.defineProperty(t,"__esModule",{value:!0});var o=i(261),s=i(94),l=n,r=s(null,o.a,!1,l,null,null);t.default=r.exports},261:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"toolbar"},[e._t("default")],2)},o=[],s={render:n,staticRenderFns:o};t.a=s},262:function(e,t,i){var n=i(257);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(95)("08715306",n,!0,{})},270:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(254),o=i.n(n);for(var s in n)["default","default"].indexOf(s)<0&&function(e){i.d(t,e,function(){return n[e]})}(s);var l=i(271),r=i(94),a=r(o.a,l.a,!1,null,null,null);t.default=a.exports},271:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",[i("span",{staticStyle:{"margin-right":"8px"}},[e._t("default")],2),e._v(" "),i("el-tooltip",{attrs:{content:e.content,placement:e.placement}},[i("i",{staticClass:"el-icon-question",staticStyle:{cursor:"pointer"}})])],1)},o=[],s={render:n,staticRenderFns:o};t.a=s},372:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(59),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default={name:"PermissionsEdit",props:{role:[Object,Boolean]},data:function(){return{dialogFormVisible:!1,btnLoading:!1,allPermissions:[],searchPermissionsDisplayName:"",multipleSelection:[]}},watch:{role:{handler:function(){var e=this;e.role&&(e.dialogFormVisible=!0)},deep:!0},searchPermissionsDisplayName:{handler:function(){this.searchPermissions()}}},methods:{changeFun:function(e){this.multipleSelection=e},searchPermissions:function(){for(var e=this.$refs.permissionsTable.$el.querySelectorAll("tbody tr"),t=this.$refs.permissionsTable.$el.getElementsByClassName("el-table__body-wrapper")[0],i=e[1].offsetHeight,n=!1,o=0;o<this.allPermissions.length;o++)this.searchPermissionsDisplayName&&-1!=this.allPermissions[o].display_name.indexOf(this.searchPermissionsDisplayName)?(e[o].style.backgroundColor="#85ce61",n||(t.scrollTo(0,o*i),n=!0)):e[o].style.backgroundColor="#fff"},btnOk:function(){var e=this,t=this;t.$notify({title:"编辑“"+t.role.name+"”权限成功！",message:"自己对接Api,角色id："+t.role.id+",选择了"+t.multipleSelection.length+"项权限",type:"success"}),this.$emit("success"),this.btnLoading=!0,setTimeout(function(){e.btnLoading=!1,e.dialogFormVisible=!1,e.$refs.permissionsTable.clearSelection()},600)}},mounted:function(){for(var e=this,t=o.default.options.routes[0].children,i=0;i<t.length;i++){var n=t[i];e.allPermissions.push({id:"",name:n.name+"View",display_name:n.meta.title+"查看权限",description:"查看权限"}),e.allPermissions.push({id:"",name:n.name+"Edit",display_name:n.meta.title+"编辑权限",description:"编辑权限"})}},components:{}}},373:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(260),s=n(o),l=i(270),r=n(l),a=i(754),c=n(a),u=i(753),d=n(u);t.default={data:function(){return{roleEditTitle:"角色编辑",currentEditRole:!1,dialogFormVisible:!1,currentEditPermissions:!1,params:{name:""},roleData:[{id:1,key:"SuperAdmin",name:"超级管理员",description:"具有最高权限,全站唯一"},{id:2,key:"NormalAdmin",name:"普通管理员",description:"拥有所有权限,除权限管理权限"},{id:4,key:"Admin",name:"一般管理员",description:"只有查看权限"}]}},methods:{searchRole:function(){for(var e=this.$refs.table.$el.querySelectorAll("tbody tr"),t=e[1].offsetHeight,i=!1,n=0;n<this.roleData.length;n++)this.params.name&&-1!=this.roleData[n].name.indexOf(this.params.name)?(e[n].style.backgroundColor="#85ce61",i||(scrollTo(0,n*t+66),i=!0)):e[n].style.backgroundColor="#fff"},tableAction:function(){return this.$createElement("HelpHint",{props:{content:"编辑角色 / 编辑角色权限"}},"操作")},roleEditChange:function(e){console.log(e);var t=this;t.$notify({title:t.roleEditTitle+"成功！",message:"自己对接Api,并调用你的初始化列表函数！",type:"success"}),t.dialogFormVisible=!1},editRole:function(e){this.currentEditRole=e||!1,this.dialogFormVisible=!0},UploadRole:function(e){},deleteRole:function(e){this.$message({message:"这里请求api删除或者恢复用户之后刷新分页组件，列表自动更新",type:"success"})},resetting:function(e){var t=this.$refs[e].$el;t.style.transform="rotate(180deg)",setTimeout(function(){t.style.transform="rotate(0deg)"},600),this.$message({message:"已经成功重置密码",type:"success"})}},components:{ToolBar:s.default,HelpHint:r.default,RoleEdit:c.default,PermissionsEdit:d.default}}},374:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"RoleEdit",props:{dialogFormVisible:Boolean,data:[Object,Boolean],title:String},data:function(){return{form:{id:null,name:"",description:""},btnLoading:!1}},watch:{data:{handler:function(){if(this.data)for(var e in this.form)this.form[e]=this.data[e];else for(var t in this.form)this.form[t]=""},deep:!0}},methods:{handleChange:function(){},btnOk:function(){var e=this,t=!1;if(this.form.name.length<=2&&(t="角色名称必须大于2个字符"),t)return void this.$message.error(t);this.$emit("val-change",this.form),this.btnLoading=!0,setTimeout(function(){e.btnLoading=!1},1e3)}},components:{}}},472:function(e,t,i){t=e.exports=i(19)(void 0),t.push([e.i,"",""])},474:function(e,t,i){t=e.exports=i(19)(void 0),t.push([e.i,"",""])},478:function(e,t,i){t=e.exports=i(19)(void 0),t.push([e.i,"",""])},753:function(e,t,i){"use strict";function n(e){i(789)}Object.defineProperty(t,"__esModule",{value:!0});var o=i(372),s=i.n(o);for(var l in o)["default","default"].indexOf(l)<0&&function(e){i.d(t,e,function(){return o[e]})}(l);var r=i(771),a=i(94),c=n,u=a(s.a,r.a,!1,c,null,null);t.default=u.exports},754:function(e,t,i){"use strict";function n(e){i(783)}Object.defineProperty(t,"__esModule",{value:!0});var o=i(374),s=i.n(o);for(var l in o)["default","default"].indexOf(l)<0&&function(e){i.d(t,e,function(){return o[e]})}(l);var r=i(765),a=i(94),c=n,u=a(s.a,r.a,!1,c,null,null);t.default=u.exports},765:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"role-dialog"},[i("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,"show-close":!1,width:"45%"}},[i("el-form",{attrs:{model:e.form}},[i("el-form-item",{attrs:{label:"角色名称"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"角色描述"}},[i("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入角色描述"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){return e.$emit("cancel")}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.btnOk}},[e._v("确 定")])],1)],1)],1)},o=[],s={render:n,staticRenderFns:o};t.a=s},767:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"role-list"},[i("ToolBar",[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:function(t){return e.editRole(!1)}}},[e._v("添加")]),e._v(" "),i("div",{staticStyle:{float:"right"}},[i("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:"请输入角色名称！",size:"small",clearable:""},on:{clear:e.searchRole},model:{value:e.params.name,callback:function(t){e.$set(e.params,"name",t)},expression:"params.name"}}),e._v(" "),i("el-button",{attrs:{type:"success",icon:"el-icon-search",size:"small"},on:{click:e.searchRole}})],1)],1),e._v(" "),i("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:e.roleData,border:""}},[i("el-table-column",{attrs:{prop:"key",label:"角色key"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"角色名称"}}),e._v(" "),i("el-table-column",{attrs:{prop:"description",label:"描述"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作","render-header":e.tableAction,width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small",circle:""},on:{click:function(i){return e.editRole(t.row)}}}),e._v(" "),i("el-button",{attrs:{type:"success",icon:"el-icon-setting",size:"small",circle:""},on:{click:function(i){e.currentEditPermissions=t.row}}})]}}])})],1),e._v(" "),i("RoleEdit",{attrs:{title:e.roleEditTitle,dialogFormVisible:e.dialogFormVisible,data:e.currentEditRole},on:{"val-change":e.roleEditChange,cancel:function(t){e.dialogFormVisible=!1}}}),e._v(" "),i("PermissionsEdit",{attrs:{role:e.currentEditPermissions},on:{success:function(t){e.currentEditPermissions=!1},cancel:function(t){e.currentEditPermissions=!1}}})],1)},o=[],s={render:n,staticRenderFns:o};t.a=s},771:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"role-dialog"},[i("el-dialog",{attrs:{title:"编辑“"+e.role.name+"”的权限",visible:e.dialogFormVisible,"show-close":!1}},[i("el-table",{ref:"permissionsTable",staticStyle:{width:"100%"},attrs:{data:e.allPermissions,border:"",height:"500"},on:{"selection-change":e.changeFun}},[i("el-table-column",{attrs:{type:"selection",width:"35"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"权限KEY"}}),e._v(" "),i("el-table-column",{attrs:{prop:"display_name",label:"权限名称"}}),e._v(" "),i("el-table-column",{attrs:{prop:"description",label:"权限描述"},scopedSlots:e._u([{key:"default",fn:function(t){return i("div",{},[e._v("\n          "+e._s(t.row.description?t.row.description:"暂无描述")+"\n        ")])}}])})],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticStyle:{float:"left"}},[i("el-input",{attrs:{placeholder:"搜索权限名称",clearable:""},model:{value:e.searchPermissionsDisplayName,callback:function(t){e.searchPermissionsDisplayName=t},expression:"searchPermissionsDisplayName"}})],1),e._v(" "),i("el-button",{on:{click:function(t){e.dialogFormVisible=!1,e.$emit("cancel")}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.btnOk}},[e._v("确 定")])],1)],1)],1)},o=[],s={render:n,staticRenderFns:o};t.a=s},783:function(e,t,i){var n=i(472);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(95)("6f916387",n,!0,{})},785:function(e,t,i){var n=i(474);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(95)("6cc48a40",n,!0,{})},789:function(e,t,i){var n=i(478);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(95)("6d425786",n,!0,{})}});
webpackJsonp([5],{237:function(e,t,i){"use strict";function r(e){i(780)}Object.defineProperty(t,"__esModule",{value:!0});var a=i(376),s=i.n(a);for(var l in a)["default","default"].indexOf(l)<0&&function(e){i.d(t,e,function(){return a[e]})}(l);var n=i(762),o=i(94),c=r,d=o(s.a,n.a,!1,c,null,null);t.default=d.exports},254:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"HelpHint",props:{placement:{default:"top"},content:String},data:function(){return{}}}},257:function(e,t,i){t=e.exports=i(19)(void 0),t.push([e.i,".toolbar{width:100%;padding:8px;background-color:#fff;overflow:hidden;line-height:32px;border:1px solid #e6ebf5}",""])},260:function(e,t,i){"use strict";function r(e){i(262)}Object.defineProperty(t,"__esModule",{value:!0});var a=i(261),s=i(94),l=r,n=s(null,a.a,!1,l,null,null);t.default=n.exports},261:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"toolbar"},[e._t("default")],2)},a=[],s={render:r,staticRenderFns:a};t.a=s},262:function(e,t,i){var r=i(257);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);i(95)("08715306",r,!0,{})},270:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(254),a=i.n(r);for(var s in r)["default","default"].indexOf(s)<0&&function(e){i.d(t,e,function(){return r[e]})}(s);var l=i(271),n=i(94),o=n(a.a,l.a,!1,null,null,null);t.default=o.exports},271:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",[i("span",{staticStyle:{"margin-right":"8px"}},[e._t("default")],2),e._v(" "),i("el-tooltip",{attrs:{content:e.content,placement:e.placement}},[i("i",{staticClass:"el-icon-question",staticStyle:{cursor:"pointer"}})])],1)},a=[],s={render:r,staticRenderFns:a};t.a=s},376:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=i(260),s=r(a),l=i(270),n=r(l),o=i(31),c=r(o);t.default={data:function(){return{adminloading:"",xuexiao:"",shi_tip:"",xian_tip:"",schoolSelect:"",adminList:[],search_input:"",college:[],province:[],cities:[],distinct:[],submit:{regionId:""},addUser:{zhanghao:"",mima:"",nick:"",school:"",tel:"",private:"",email:"",region:{cities:"",province:"",distinct:""},collegeId:""},school:"",edit_user:{id:"",accont:"",pwd:"",nick:"",school:"",tel:"",private:"",email:"",collegeId:""},addVisible:!1,editVisible:!1,private:[{value:"一级管理员"},{value:"二级管理员"}],params:{name:""},usersData:[],editrules:{id:[{required:!0,message:"账号id不能为空",trigger:"blur"}],accont:[{required:!0,message:"请填写登陆账号",trigger:"blur"}],pwd:[{required:!0,message:"请填写用户登录密码",trigger:"blur"}],nick:[{required:!0,message:"请填写用户昵称",trigger:"blur"}],school:[{required:!0,message:"请填写学校",trigger:"blur"}],tel:[{required:!0,message:"请填写手机号码",trigger:"blur"}],email:[{required:!0,message:"请填写邮箱",trigger:"blur"}],private:[{required:!0,message:"请填写用户权限",trigger:"blur"}]},rules:{region:[{type:"object",required:!0,trigger:"change",fields:{province:{required:!0,message:"请选择省份",trigger:"blur"},cities:{required:!0,message:"请选择城市",trigger:"blur"},distinct:{required:!0,message:" 请选择区域",trigger:"blur"}}}],zhanghao:[{required:!0,message:"请填写登陆账号",trigger:"blur"}],mima:[{required:!0,message:"请填写用户登录密码",trigger:"blur"}],nick:[{required:!0,message:"请填写用户昵称",trigger:"blur"}],school:[{required:!0,message:"请填写学校",trigger:"blur"}],tel:[{required:!0,message:"请填写手机号码",trigger:"blur"}],email:[{required:!0,message:"请填写邮箱",trigger:"blur"}],private:[{required:!0,message:"请填写用户权限",trigger:"blur"}]}}},created:function(){this.getadmin(1)},methods:{getadmin:function(e){var t=this;t.adminloading=!0,c.default.get("/api/v1/service-user/admin/list/"+e+"/20").then(function(e){t.usersData=e.data.data.content,t.adminloading=!1}).catch(function(e){t.adminloading=!1})},selectSchool:function(e){var t=this.school.filter(function(t){return t.collegeName==e})[0].collegeId;this.addUser.collegeId=t},xian_s:function(e){var t=this,i=t.distinct.filter(function(t){return t.regionName==e})[0].regionId;t.submit.regionId=i,t.getSchool(t.submit.regionId)},cities_s:function(e){var t=this;t.addUser.region.distinct="",t.distinct.length=0,t.getArea("distinct",regionId)},province_s:function(e){var t=this;t.addUser.region.cities="",t.addUser.region.distinct="",t.cities.length=0,t.distinct.length=0;var i=t.province.filter(function(t){return t.regionName==e})[0].regionId;t.getArea("cities",i)},getArea:function(e,t){var i=this;"cities"==e?c.default.get("/api/v1/location/region/next/"+t).then(function(e){i.cities=e.data.data}).catch(function(e){}):"distinct"==e&&c.default.get("/api/v1/location/region/next/"+t).then(function(e){i.distinct=e.data.data}).catch(function(e){})},getSchool:function(e){var t=this;c.default.get("/api/v1/location/college/list/"+e).then(function(e){var i=e.data.data;t.school=i}).catch(function(e){})},sheng:function(){var e=this;31!=e.province.length&&c.default.get("/api/v1/location/region/next/1").then(function(t){e.province=t.data.data}).catch(function(e){})},shi:function(){""==this.addUser.region.province?this.shi_tip="请先选择省":this.shi_tip="数据正在加载中..."},xian:function(){""==this.addUser.region.cities?this.xian_tip="请先选择市":this.xian_tip="数据正在加载中..."},search_order_by_id:function(e){},resetForm:function(){this.$refs.addUser.resetFields()},reset_editForm:function(){console.log("======="),this.$refs.edit_user.resetFields()},submitForm:function(e){console.log(e);var t=this;this.$refs.addUser.validate(function(i){console.log(i);var r={college:e.school,collegeId:e.collegeId,nickname:e.nick,password:e.mima,phone:e.tel,userName:e.zhanghao,email:e.email,access:e.private};i&&(console.log("校验成功"),(0,c.default)({url:"/api/v1/service-user/admin",method:"POST",data:r,header:{"Content-Type":"application/json"}}).then(function(e){console.log("res"),t.$message({showClose:!0,message:"管理员添加成功！",type:"success"}),t.addVisible=!1,t.getadmin(1)}).catch(function(e){t.$message({showClose:!0,message:"管理员添加失败！",type:"error"}),t.addVisible=!1}))})},searchUser:function(e){console.log(e)},tableAction:function(){return this.$createElement("HelpHint",{props:{content:"重置密码为123456 / 编辑用户 / 删除或恢复用户"}},"操作")},add_user:function(){this.addVisible=!0},editUser:function(e){this.edit_user.accont=e.userName,this.edit_user.nick=e.nickname,this.edit_user.pwd=e.password,this.edit_user.tel=e.phone,this.edit_user.school=e.college,this.edit_user.private=e.access,this.edit_user.email=e.email,this.edit_user.collegeId=e.collegeId,this.edit_user.id=e.id,this.editVisible=!0},submit_editform:function(e){var t=this;this.$refs.edit_user.validate(function(i){console.log(i);var r={nickname:e.nick,college:e.school,password:e.pwd,phone:e.tel,userName:e.accont,access:e.private,collegeId:e.collegeId,email:e.email,id:e.id};i&&(0,c.default)({url:"/api/v1/service-user/admin",method:"PUT",data:r,header:{"Content-Type":"application/json"}}).then(function(e){t.$message({showClose:!0,message:"管理员编辑成功！",type:"success"}),t.editVisible=!1,t.getadmin(1)}).catch(function(e){t.$message({showClose:!0,message:"管理员编辑失败！",type:"error"}),t.editVisible=!1})})},UploadUser:function(e){},deleteUser:function(e){var t=this;t.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){c.default.delete("/api/v1/service-user/admin/"+e).then(function(e){t.$message({type:"success",message:"删除成功!"}),t.getadmin(1)}).catch(function(e){t.$message({type:"info",message:"网络错误"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},resetting:function(e){var t=this.$refs[e].$el;t.style.transform="rotate(180deg)",setTimeout(function(){t.style.transform="rotate(0deg)"},600),this.$message({message:"已经成功重置密码",type:"success"})}},components:{ToolBar:s.default,HelpHint:n.default}}},469:function(e,t,i){t=e.exports=i(19)(void 0),t.push([e.i,"",""])},762:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"user-list"},[i("ToolBar",[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.add_user}},[e._v("添加")]),e._v(" "),i("div",{staticStyle:{float:"right"}},[i("el-input",{staticStyle:{width:"260px"},attrs:{placeholder:"请输入用户id",size:"small",clearable:""},model:{value:e.search_input,callback:function(t){e.search_input=t},expression:"search_input"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.search_order_by_id(e.search_input)}},slot:"append"})],1)],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"添加管理员",visible:e.addVisible},on:{"update:visible":function(t){e.addVisible=t}}},[i("el-form",{ref:"addUser",staticClass:"demo-ruleForm",attrs:{"status-icon":"","label-width":"100px",rules:e.rules,model:e.addUser}},[i("el-form-item",{attrs:{label:"登陆账号",prop:"zhanghao"}},[i("el-input",{model:{value:e.addUser.zhanghao,callback:function(t){e.$set(e.addUser,"zhanghao",t)},expression:"addUser.zhanghao"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"登录密码",prop:"mima"}},[i("el-input",{model:{value:e.addUser.mima,callback:function(t){e.$set(e.addUser,"mima",t)},expression:"addUser.mima"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"昵称",prop:"nick"}},[i("el-input",{model:{value:e.addUser.nick,callback:function(t){e.$set(e.addUser,"nick",t)},expression:"addUser.nick"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"地区",prop:"region"}},[i("el-select",{attrs:{placeholder:"请选择省","no-data-text":"数据正在加载中..."},on:{focus:e.sheng,change:function(t){return e.province_s(e.addUser.region.province)}},model:{value:e.addUser.region.province,callback:function(t){e.$set(e.addUser.region,"province",t)},expression:"addUser.region.province"}},e._l(e.province,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.regionName}},[i("span",{staticStyle:{float:"left"}},[e._v(e._s(t.regionName))]),e._v(" "),i("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.regionId))])])}),1),e._v(" "),i("el-select",{attrs:{placeholder:"请选择市","no-data-text":e.shi_tip},on:{focus:e.shi,change:function(t){return e.cities_s(e.addUser.region.cities)}},model:{value:e.addUser.region.cities,callback:function(t){e.$set(e.addUser.region,"cities",t)},expression:"addUser.region.cities"}},e._l(e.cities,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.regionName}},[i("span",{staticStyle:{float:"left"}},[e._v(e._s(t.regionName))]),e._v(" "),i("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.regionId))])])}),1),e._v(" "),i("el-select",{attrs:{placeholder:"请选择县/区","no-data-text":e.xian_tip},on:{focus:e.xian,change:function(t){return e.xian_s(e.addUser.region.distinct)}},model:{value:e.addUser.region.distinct,callback:function(t){e.$set(e.addUser.region,"distinct",t)},expression:"addUser.region.distinct"}},e._l(e.distinct,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.regionName}},[i("span",{staticStyle:{float:"left"}},[e._v(e._s(t.regionName))]),e._v(" "),i("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.regionId))])])}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"所在学校",prop:"school"}},[i("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.selectSchool(e.addUser.school)}},model:{value:e.addUser.school,callback:function(t){e.$set(e.addUser,"school",t)},expression:"addUser.school"}},e._l(e.school,function(e){return i("el-option",{key:e.collegeId,attrs:{value:e.collegeName}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"权限",prop:"private"}},[i("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){}},model:{value:e.addUser.private,callback:function(t){e.$set(e.addUser,"private",t)},expression:"addUser.private"}},e._l(e.private,function(e){return i("el-option",{attrs:{value:e.value}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"手机号",prop:"tel"}},[i("el-input",{model:{value:e.addUser.tel,callback:function(t){e.$set(e.addUser,"tel",t)},expression:"addUser.tel"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[i("el-input",{model:{value:e.addUser.email,callback:function(t){e.$set(e.addUser,"email",t)},expression:"addUser.email"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm(e.addUser)}}},[e._v("提交")]),e._v(" "),i("el-button",{on:{click:function(t){return e.resetForm(e.addUser)}}},[e._v("重置")])],1)],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"编辑管理员",visible:e.editVisible},on:{"update:visible":function(t){e.editVisible=t}}},[i("el-form",{ref:"edit_user",staticClass:"demo-ruleForm",attrs:{"status-icon":"","label-width":"100px",rules:e.editrules,model:e.edit_user}},[i("el-form-item",{attrs:{label:"账号id",prop:"id"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.edit_user.id,callback:function(t){e.$set(e.edit_user,"id",t)},expression:"edit_user.id"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"登录账号",prop:"accont"}},[i("el-input",{model:{value:e.edit_user.accont,callback:function(t){e.$set(e.edit_user,"accont",t)},expression:"edit_user.accont"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"登录密码",prop:"pwd"}},[i("el-input",{model:{value:e.edit_user.pwd,callback:function(t){e.$set(e.edit_user,"pwd",t)},expression:"edit_user.pwd"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"昵称",prop:"nick"}},[i("el-input",{model:{value:e.edit_user.nick,callback:function(t){e.$set(e.edit_user,"nick",t)},expression:"edit_user.nick"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"学校id",prop:"school"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.edit_user.collegeId,callback:function(t){e.$set(e.edit_user,"collegeId",t)},expression:"edit_user.collegeId"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"所在学校",prop:"school"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.edit_user.school,callback:function(t){e.$set(e.edit_user,"school",t)},expression:"edit_user.school"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"权限",prop:"private"}},[i("el-input",{model:{value:e.edit_user.private,callback:function(t){e.$set(e.edit_user,"private",t)},expression:"edit_user.private"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"手机号",prop:"tel"}},[i("el-input",{model:{value:e.edit_user.tel,callback:function(t){e.$set(e.edit_user,"tel",t)},expression:"edit_user.tel"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[i("el-input",{model:{value:e.edit_user.email,callback:function(t){e.$set(e.edit_user,"email",t)},expression:"edit_user.email"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit_editform(e.edit_user)}}},[e._v("提交")]),e._v(" "),i("el-button",{on:{click:function(t){return e.reset_editForm(e.edit_user)}}},[e._v("重置")])],1)],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.adminloading,expression:"adminloading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.usersData,border:""}},[i("el-table-column",{attrs:{prop:"userName",label:"登录账号"}}),e._v(" "),i("el-table-column",{attrs:{prop:"nickname",label:"昵称"}}),e._v(" "),i("el-table-column",{attrs:{prop:"phone",label:"手机"}}),e._v(" "),i("el-table-column",{attrs:{prop:"collegeId",label:"学校id"}}),e._v(" "),i("el-table-column",{attrs:{prop:"college",label:"所在学校"}}),e._v(" "),i("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),e._v(" "),i("el-table-column",{attrs:{prop:"access",label:"管理权限",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{prop:"college",label:"所在学校"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small",circle:""},on:{click:function(i){return e.editUser(t.row)}}}),e._v(" "),i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"small"},on:{click:function(i){return e.deleteUser(t.row.id)}}})]}}])})],1)],1)},a=[],s={render:r,staticRenderFns:a};t.a=s},780:function(e,t,i){var r=i(469);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);i(95)("757d47cd",r,!0,{})}});